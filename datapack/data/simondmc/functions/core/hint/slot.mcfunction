# ticking function, makes sure you can't lose items to offhand slot, and makes the switching work

execute as @a[tag=ingame,nbt={SelectedItem:{id:"minecraft:gray_candle"}}] run scoreboard players set @s hint 1
execute as @a[tag=ingame,nbt={SelectedItem:{id:"minecraft:lime_candle"}}] run scoreboard players set @s hint 1
execute as @a[tag=ingame,nbt=!{Inventory:[{id:"minecraft:gray_candle",Slot:-106b}]},nbt=!{Inventory:[{id:"minecraft:lime_candle",Slot:-106b}]}] run item replace block 1 93 9 container.0 from entity @s weapon.offhand
execute as @a[tag=ingame,nbt=!{Inventory:[{id:"minecraft:gray_candle",Slot:-106b}]},nbt=!{Inventory:[{id:"minecraft:lime_candle",Slot:-106b}]}] run item replace entity @s weapon.offhand with air
execute as @a[tag=ingame,nbt=!{Inventory:[{id:"minecraft:gray_candle",Slot:-106b}]},nbt=!{Inventory:[{id:"minecraft:lime_candle",Slot:-106b}]}] run clear @s gray_candle
execute as @a[tag=ingame,nbt=!{Inventory:[{id:"minecraft:gray_candle",Slot:-106b}]},nbt=!{Inventory:[{id:"minecraft:lime_candle",Slot:-106b}]}] run clear @s lime_candle
execute as @a[tag=ingame,nbt=!{Inventory:[{id:"minecraft:gray_candle",Slot:-106b}]},nbt=!{Inventory:[{id:"minecraft:lime_candle",Slot:-106b}]}] run loot give @s mine 1 93 9 air{drop_contents:1b}
execute as @a[tag=ingame,nbt=!{Inventory:[{id:"minecraft:gray_candle",Slot:-106b}]},nbt=!{Inventory:[{id:"minecraft:lime_candle",Slot:-106b}]}] unless score global hint matches 1 run item replace entity @a[tag=ingame] weapon.offhand with gray_candle{display:{Name:'{"text":"Clue","color":"#F77EEA","bold":true,"italic":false}',Lore:['[{"text":"Press ","color":"gray","italic":false},{"keybind":"key.swapOffhand","color":"yellow","bold":true},{"text":" to highlight all "}]','{"text":"blocks necessary for puzzles. ","color":"gray","italic":false}','{"text":" "}','[{"text":"Orange","color":"gold","italic":false},{"text":": Interact","color":"gray","italic":false}]','[{"text":"Green","color":"#77E85A","italic":false},{"text":":  Destroy","color":"gray","italic":false}]','[{"text":"Red","color":"red","italic":false},{"text":":     Storage","color":"gray","italic":false}]']}}
execute as @a[tag=ingame,nbt=!{Inventory:[{id:"minecraft:gray_candle",Slot:-106b}]},nbt=!{Inventory:[{id:"minecraft:lime_candle",Slot:-106b}]}] if score global hint matches 1 run item replace entity @a[tag=ingame] weapon.offhand with lime_candle{display:{Name:'{"text":"Clue","color":"#F77EEA","bold":true,"italic":false}',Lore:['[{"text":"Press ","color":"gray","italic":false},{"keybind":"key.swapOffhand","color":"yellow","bold":true},{"text":" to highlight all "}]','{"text":"blocks necessary for puzzles. ","color":"gray","italic":false}','{"text":" "}','[{"text":"Orange","color":"gold","italic":false},{"text":": Interact","color":"gray","italic":false}]','[{"text":"Green","color":"#77E85A","italic":false},{"text":":  Destroy","color":"gray","italic":false}]','[{"text":"Red","color":"red","italic":false},{"text":":     Storage","color":"gray","italic":false}]']}}

# remove hint in mainhand in case of switching through container
execute as @a[tag=ingame,nbt={SelectedItem:{id:"minecraft:lime_candle"}}] run item replace entity @s weapon.mainhand with air
execute as @a[tag=ingame,nbt={SelectedItem:{id:"minecraft:gray_candle"}}] run item replace entity @s weapon.mainhand with air